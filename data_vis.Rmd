---
title: ""
output: 
  html_document:
    toc: true
    toc_float: true
    collapsed: false
    number_sections: false
    toc_depth: 3
    code_folding: hide

---

---

## Ceiling Effect Visualization

----

<div class="row">
<div class="col-sm-6">

#### Overview

  Data from the <a href = "https://developer.spotify.com/documentation/web-api/" target = "_blank"> Spotify API </a> is fodder for a few data journalism projects currently in the works. One project involves visualizing changing applause levels among artists' studio and live recordings. This interactive jitter plot, built using the JavaScript library D3.js, allows a user to evaluate distances between points and visualize the "ceiling effect" of comparison data.


#### Technical
Web scraping: Python (BeautifulSoup) </br>
Data Cleaning: tidyverse </br>
Data visualization: D3.js
</div>
<div class="col-sm-6">

<a href="https://crumplab.github.io/psyc3400/">
```{r rcourse, out.width=150, echo=F}
knitr::include_graphics("images/spotify.png")
```
</a>

</div>
</div>

-----

<div class="row">
<div class="col-sm-6">

#### Sample

Sample visualization below. Full project in process.
</div>
<div class="col-sm-6">


```{r echo=TRUE, message=FALSE, eval=FALSE}
```{r eval=FALSE, echo=TRUE, message=FALSE}
# d3.csv("data/small_website.csv"), (function(data){
#    console.log(data);
# });
# 
# 
# 
# var w = 400;
# var h = 400;
# var barPadding = 1;
# var padding = 20;
# 
# var svg = d3.select("#chart-area-updates2").append("svg")
#    .attr("width", w)
#    .attr("height", h);
# var jitterWidth = 100;
# 
# var allGroup = d3.map(data, function(d){
#   return(d.artist_name)}).keys();
#   
# var yScale = d3.scaleLinear()
#   .domain([0, 1])
#   .range([300,1]);
#   
# var yAxis = d3.axisLeft()
#   .scale(yScale)
#   .ticks(5);
#   
# 
# d3.select("#selectButton")
#   .selectAll('myOptions')
#   .data(allGroup)
#   .enter()
#   .append('option')
#   .text(function(d) { return d; })
#   .attr("value", function(d) {return d;});
#     
# 
# 
# svg.selectAll("circle")
#   .data(data)
#   .enter()
#   .append("circle")
#   .style("opacity", '0.7')
#   .attr("cx", function(d){
#     return(150 - Math.random() *jitterWidth)})
#   .attr("cy", function(d) {
#     return yScale(d.mean_liveness);
#   })
#   .attr("r", function(d) {
#     return d.mean_liveness*10;
# })
#   .attr("fill", function(d){
#     if(d.live_marker2 == "live"){
#       return "#CCE5FF";
#     } else{
#       return "#000099";
#     }
#   });
#  
# 
#     
# 
# 
# d3.select("#selectButton")
# .on("change", function(){
#   
#    var selectedOption = d3.select(this).property("value");
#    
#   svg.selectAll("circle")
#   .data(data)
#   .transition()
#   .duration(800)
#   .filter(function(d){
#     return d.artist_name == selectedOption;
#   })
#   .attr("cx", 250)
#   .attr("cy", function(d) {
#     return d.mean_liveness * 450;
#   })
#   .attr("r", function(d) {
#     return d.mean_liveness*20;
# })
#   .attr("fill", function(d){
#     if(d.live_marker2 == "live"){
#       return "#CCE5FF";
#     } else{
#       return "#000099";
#     }
#   });
#   });  
# 
# d3.select("#clickingtag")
#   .on("click", function(){
# 
# svg.selectAll("circle")
#   .data(data)
#   .filter(function(d){
#     return d.artist_name == "Nirvana";
#   })
#   .attr("cx", 150)
#   .attr("cy", function(d) {
#     return d.mean_liveness * 450;
#   })
#   .attr("r", function(d) {
#     return d.mean_liveness*7;
# })
#   .attr("fill", function(d){
#     if(d.live_marker2 == "live"){
#       return "blue";
#     } else{
#       return "black";
#     }
#   });
#   });  
#   
#   
# svg.append("g")
#   .attr("class", "axis")
#   .attr("transform", "translate(" + padding + ",0)")
#   .call(yAxis);
# 
# ```
# 
# 
# <h3 id = "updates and motions2"> Studio and Live Applause </h3>
# 
# <body id = "updates and motions">
# 
# <div class = "container updates">
#  <div class = "row updates">
#  <div id = "chart-area-updates2"></div>
#   </div>
#  <select id="selectButton"></select>
# </div>
#  <p id = "clickingtag"> Choose an artist </p>
#  <svg id = "1"></svg>
# </div>
# 
# 
# ```{r setupupdate00}
# knitr::opts_chunk$set(
# 	echo = TRUE,
# 	message = FALSE,
# 	warning = FALSE
# )
# d3.csv("data/small_website.csv"), (function(data){
#    console.log(data);
# });
# 
# 
# 
# var w = 400;
# var h = 400;
# var barPadding = 1;
# var padding = 20;
# 
# var svg = d3.select("#chart-area-updates2").append("svg")
#    .attr("width", w)
#    .attr("height", h);
# var jitterWidth = 100;
# 
# var allGroup = d3.map(data, function(d){
#   return(d.artist_name)}).keys();
#   
# var yScale = d3.scaleLinear()
#   .domain([0, 1])
#   .range([300,1]);
#   
# var yAxis = d3.axisLeft()
#   .scale(yScale)
#   .ticks(5);
#   
# 
# d3.select("#selectButton")
#   .selectAll('myOptions')
#   .data(allGroup)
#   .enter()
#   .append('option')
#   .text(function(d) { return d; })
#   .attr("value", function(d) {return d;});
#     
# 
# 
# svg.selectAll("circle")
#   .data(data)
#   .enter()
#   .append("circle")
#   .style("opacity", '0.7')
#   .attr("cx", function(d){
#     return(150 - Math.random() *jitterWidth)})
#   .attr("cy", function(d) {
#     return yScale(d.mean_liveness);
#   })
#   .attr("r", function(d) {
#     return d.mean_liveness*10;
# })
#   .attr("fill", function(d){
#     if(d.live_marker2 == "live"){
#       return "#CCE5FF";
#     } else{
#       return "#000099";
#     }
#   });
#  
# 
#     
# 
# 
# d3.select("#selectButton")
# .on("change", function(){
#   
#    var selectedOption = d3.select(this).property("value");
#    
#   svg.selectAll("circle")
#   .data(data)
#   .transition()
#   .duration(800)
#   .filter(function(d){
#     return d.artist_name == selectedOption;
#   })
#   .attr("cx", 250)
#   .attr("cy", function(d) {
#     return d.mean_liveness * 450;
#   })
#   .attr("r", function(d) {
#     return d.mean_liveness*20;
# })
#   .attr("fill", function(d){
#     if(d.live_marker2 == "live"){
#       return "#CCE5FF";
#     } else{
#       return "#000099";
#     }
#   });
#   });  
# 
# d3.select("#clickingtag")
#   .on("click", function(){
# 
# svg.selectAll("circle")
#   .data(data)
#   .filter(function(d){
#     return d.artist_name == "Nirvana";
#   })
#   .attr("cx", 150)
#   .attr("cy", function(d) {
#     return d.mean_liveness * 450;
#   })
#   .attr("r", function(d) {
#     return d.mean_liveness*7;
# })
#   .attr("fill", function(d){
#     if(d.live_marker2 == "live"){
#       return "blue";
#     } else{
#       return "black";
#     }
#   });
#   });  
#   
#   
# svg.append("g")
#   .attr("class", "axis")
#   .attr("transform", "translate(" + padding + ",0)")
#   .call(yAxis);

```

</style>

<div class="row" style="padding-top: 30px;">
<div class="col-sm-6">


<body id = "updates and motions">

<div class = "container updates">
 <div class = "row updates">
 <div id = "chart-area-updates2"></div>
  </div>
 <select id="selectButton"></select>
</div>
 <svg id = "1"></svg>
</div>



```{r echo=FALSE, message=FALSE}

# d3.csv("data/small_website.csv"), (function(data){
#    console.log(data);
# });
# 
# 
# 
# var w = 400;
# var h = 400;
# var barPadding = 1;
# var padding = 20;
# 
# var svg = d3.select("#chart-area-updates2").append("svg")
#    .attr("width", w)
#    .attr("height", h);
# var jitterWidth = 100;
# 
# var allGroup = d3.map(data, function(d){
#   return(d.artist_name)}).keys();
#   
# var yScale = d3.scaleLinear()
#   .domain([0, 1])
#   .range([300,1]);
#   
# var yAxis = d3.axisLeft()
#   .scale(yScale)
#   .ticks(5);
#   
# 
# d3.select("#selectButton")
#   .selectAll('myOptions')
#   .data(allGroup)
#   .enter()
#   .append('option')
#   .text(function(d) { return d; })
#   .attr("value", function(d) {return d;});
#     
# 
# 
# svg.selectAll("circle")
#   .data(data)
#   .enter()
#   .append("circle")
#   .style("opacity", '0.7')
#   .attr("cx", function(d){
#     return(150 - Math.random() *jitterWidth)})
#   .attr("cy", function(d) {
#     return yScale(d.mean_liveness);
#   })
#   .attr("r", function(d) {
#     return d.mean_liveness*10;
# })
#   .attr("fill", function(d){
#     if(d.live_marker2 == "live"){
#       return "#CCE5FF";
#     } else{
#       return "#000099";
#     }
#   });
#  
# 
#     
# 
# 
# d3.select("#selectButton")
# .on("change", function(){
#   
#    var selectedOption = d3.select(this).property("value");
#    
#   svg.selectAll("circle")
#   .data(data)
#   .transition()
#   .duration(800)
#   .filter(function(d){
#     return d.artist_name == selectedOption;
#   })
#   .attr("cx", 250)
#   .attr("cy", function(d) {
#     return d.mean_liveness * 450;
#   })
#   .attr("r", function(d) {
#     return d.mean_liveness*20;
# })
#   .attr("fill", function(d){
#     if(d.live_marker2 == "live"){
#       return "#CCE5FF";
#     } else{
#       return "#000099";
#     }
#   });
#   });  
# 
# d3.select("#clickingtag")
#   .on("click", function(){
# 
# svg.selectAll("circle")
#   .data(data)
#   .filter(function(d){
#     return d.artist_name == "Nirvana";
#   })
#   .attr("cx", 150)
#   .attr("cy", function(d) {
#     return d.mean_liveness * 450;
#   })
#   .attr("r", function(d) {
#     return d.mean_liveness*7;
# })
#   .attr("fill", function(d){
#     if(d.live_marker2 == "live"){
#       return "blue";
#     } else{
#       return "black";
#     }
#   });
#   });  
#   
#   
# svg.append("g")
#   .attr("class", "axis")
#   .attr("transform", "translate(" + padding + ",0)")
#   .call(yAxis);
# 
# ```
# 
# 
# <h3 id = "updates and motions2"> Studio and Live Applause </h3>
# 
# <body id = "updates and motions">
# 
# <div class = "container updates">
#  <div class = "row updates">
#  <div id = "chart-area-updates2"></div>
#   </div>
#  <select id="selectButton"></select>
# </div>
#  <p id = "clickingtag"> Choose an artist </p>
#  <svg id = "1"></svg>
# </div>
# 
# 
# ```{r setupupdate00}
# knitr::opts_chunk$set(
# 	echo = TRUE,
# 	message = FALSE,
# 	warning = FALSE
# )
# d3.csv("data/small_website.csv"), (function(data){
#    console.log(data);
# });
# 
# 
# 
# var w = 400;
# var h = 400;
# var barPadding = 1;
# var padding = 20;
# 
# var svg = d3.select("#chart-area-updates2").append("svg")
#    .attr("width", w)
#    .attr("height", h);
# var jitterWidth = 100;
# 
# var allGroup = d3.map(data, function(d){
#   return(d.artist_name)}).keys();
#   
# var yScale = d3.scaleLinear()
#   .domain([0, 1])
#   .range([300,1]);
#   
# var yAxis = d3.axisLeft()
#   .scale(yScale)
#   .ticks(5);
#   
# 
# d3.select("#selectButton")
#   .selectAll('myOptions')
#   .data(allGroup)
#   .enter()
#   .append('option')
#   .text(function(d) { return d; })
#   .attr("value", function(d) {return d;});
#     
# 
# 
# svg.selectAll("circle")
#   .data(data)
#   .enter()
#   .append("circle")
#   .style("opacity", '0.7')
#   .attr("cx", function(d){
#     return(150 - Math.random() *jitterWidth)})
#   .attr("cy", function(d) {
#     return yScale(d.mean_liveness);
#   })
#   .attr("r", function(d) {
#     return d.mean_liveness*10;
# })
#   .attr("fill", function(d){
#     if(d.live_marker2 == "live"){
#       return "#CCE5FF";
#     } else{
#       return "#000099";
#     }
#   });
#  
# 
#     
# 
# 
# d3.select("#selectButton")
# .on("change", function(){
#   
#    var selectedOption = d3.select(this).property("value");
#    
#   svg.selectAll("circle")
#   .data(data)
#   .transition()
#   .duration(800)
#   .filter(function(d){
#     return d.artist_name == selectedOption;
#   })
#   .attr("cx", 250)
#   .attr("cy", function(d) {
#     return d.mean_liveness * 450;
#   })
#   .attr("r", function(d) {
#     return d.mean_liveness*20;
# })
#   .attr("fill", function(d){
#     if(d.live_marker2 == "live"){
#       return "#CCE5FF";
#     } else{
#       return "#000099";
#     }
#   });
#   });  
# 
# d3.select("#clickingtag")
#   .on("click", function(){
# 
# svg.selectAll("circle")
#   .data(data)
#   .filter(function(d){
#     return d.artist_name == "Nirvana";
#   })
#   .attr("cx", 150)
#   .attr("cy", function(d) {
#     return d.mean_liveness * 450;
#   })
#   .attr("r", function(d) {
#     return d.mean_liveness*7;
# })
#   .attr("fill", function(d){
#     if(d.live_marker2 == "live"){
#       return "blue";
#     } else{
#       return "black";
#     }
#   });
#   });  
#   
#   
# svg.append("g")
#   .attr("class", "axis")
#   .attr("transform", "translate(" + padding + ",0)")
#   .call(yAxis);

library(r2d3)
library(tidyverse)

r2d3(data = read.csv("data/small_website.csv"), d3_version = 4, script = "website_js.js")

```